<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Admin</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    form {
      max-width: 500px;
      margin: 0 auto 20px;
      background: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 10px;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #ff69b4;
      color: white;
      cursor: pointer;
      border: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    th {
      background-color: #ff69b4;
      color: white;
    }

    .expired {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Dashboard Admin</h1>

  <form id="userForm">
    <input type="text" id="nameInput" placeholder="Masukkan Nama" required />
    <select id="statusInput" required>
      <option value="">Pilih Status</option>
      <option value="1">Status 1 (3 Hari)</option>
      <option value="2">Status 2 (1 Bulan)</option>
      <option value="3">Status 3 (2 Bulan)</option>
      <option value="4">Status 4 (6 Bulan)</option>
    </select>
    <button type="submit">Tambah User</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>User ID</th>
        <th>Username</th>
        <th>Email</th>
        <th>Status</th>
        <th>Limit</th>
        <th>Expired</th>
      </tr>
    </thead>
    <tbody id="user-table-body"></tbody>
  </table>

  <script>
    const users = [];
    const tbody = document.getElementById("user-table-body");

    const getLimitByStatus = (status) => {
      switch (parseInt(status)) {
        case 1: return 10;
        case 2: return 30;
        case 3: return 100;
        case 4: return 200;
        default: return 5;
      }
    };

    const getExpiredDateByStatus = (status) => {
      const now = new Date();
      switch (parseInt(status)) {
        case 1:
          now.setDate(now.getDate() + 3);
          break;
        case 2:
          now.setMonth(now.getMonth() + 1);
          break;
        case 3:
          now.setMonth(now.getMonth() + 2);
          break;
        case 4:
          now.setMonth(now.getMonth() + 6);
          break;
        default:
          now.setDate(now.getDate() + 1);
      }
      return now.toISOString();
    };

    const generateUserId = () => 'user' + Math.floor(Math.random() * 10000);

    const renderTable = () => {
      tbody.innerHTML = '';
      users.forEach(user => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${user.user_id}</td>
          <td>${user.username}</td>
          <td>${user.email}</td>
          <td>${user.status}</td>
          <td>${user.limit}</td>
          <td class="${new Date(user.expired) < new Date() ? 'expired' : ''}">
            ${new Date(user.expired).toLocaleString("id-ID")}
          </td>
        `;
        tbody.appendChild(tr);
      });
    };

    document.getElementById("userForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("nameInput").value.trim();
      const status = document.getElementById("statusInput").value;

      if (!name || !status) return alert("Isi semua data!");

      const newUser = {
        user_id: generateUserId(),
        username: name,
        email: `${name.toLowerCase()}@example.com`,
        status: parseInt(status),
        limit: getLimitByStatus(status),
        expired: getExpiredDateByStatus(status)
      };

      users.push(newUser);
      renderTable();

      // Reset form
      document.getElementById("userForm").reset();
    });
  </script>

</body>
</html>
